.. _doc_code_style_guidelines:

Code style guidelines
=====================

.. highlight:: shell

When contributing to Scorpion's source code, you will be expected to follow the
style guidelines outlined below. Some of them are checked via the Continuous
Integration process and reviewers will ask you to fix potential issues, so
best setup your system as outlined below to ensure all your commits follow the
guidelines.

C++
---

We use `clang-format <https://clang.llvm.org/docs/ClangFormat.html>`_ for C++
code formatting. The configuration file is located in the root of the project
`.clang-format <https://github.com/ScorpionAntimalware/scorpion-antimalware/blob/master/.clang-format>`_.

.. seealso::

    These guidelines only cover code formatting. See :ref:`doc_cpp_usage_guidelines`
    for a list of language features that are permitted in pull requests.


Installation
^^^^^^^^^^^^

Here's how to install clang-format:

- Linux: It will usually be available out-of-the-box with the clang toolchain
  packaged by your distribution. If your distro version is not the required one,
  you can download a pre-compiled version from the
  `LLVM website <https://releases.llvm.org/download.html>`_, or if you are on
  a Debian derivative, use the `upstream repos <https://apt.llvm.org/>`_.
- macOS and Windows: You can download precompiled binaries from the
  `LLVM website <https://releases.llvm.org/download.html>`_. You may need to add
  the path to the binary's folder to your system's ``PATH`` environment
  variable to be able to call ``clang-format`` out of the box.

Manual usage
^^^^^^^^^^^^

You can apply clang-format manually for one or more files with the following
command:

.. code:: sh

    clang-format -i <path/to/file(s)>

- ``-i`` means that the changes should be written directly to the file (by
  default clang-format would only output the fixed version to the terminal).
- The path can point to several files, either one after the other or using
  wildcards like in a typical Unix shell. It is better to use ``core/*.{cpp,h}`` 
  than ``core/*`` when globbing.
